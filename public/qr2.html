<!-- QR Code Section for Dashboard -->
<div class="qr-section">
    <h3>Your personal QR Code to your hotgirl.social profile</h3>
    <!-- <p>Generate a QR code that links directly to your profile page. Perfect for business cards, flyers, or social media!</p> -->
    
    <div class="qr-container">
        <div class="qr-preview">
            <div id="qrDisplay"></div>
            <p class="profile-url">Profile URL: <span id="profileURL"></span></p>
        </div>
        
        <div class="qr-controls">
            <div class="color-controls">
                <label for="qrForeground">QR Code Color:</label>
                <input type="color" id="qrForeground" value="#ff69b4">
                
                <label for="qrBackground">Background Color:</label>
                <input type="color" id="qrBackground" value="#ffffff">
            </div>
            
            <div class="qr-actions">
                <button onclick="generateProfileQR()" class="btn-generate">Generate QR Code</button>
                <button onclick="downloadQR()" id="downloadQRBtn" class="btn-download" style="display: none;">Download QR Code</button>
            </div>
        </div>
    </div>
    
    <div id="qrStatus" class="status-message"></div>
</div>





<style>
.qr-section {
    background: white;
    padding: 25px;
    border-radius: 10px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    margin: 20px 0;
}

.qr-section h3 {
    color: #333;
    margin-bottom: 10px;
}

.qr-section p {
    color: #666;
    margin-bottom: 20px;
}

.qr-container {
    display: flex;
    gap: 30px;
    align-items: flex-start;
}

.qr-preview {
    text-align: center;
    min-width: 280px;
}

#qrDisplay {
    border: 2px solid #eee;
    border-radius: 8px;
    padding: 15px;
    background: #f9f9f9;
    margin-bottom: 15px;
    min-height: 280px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.profile-url {
    font-size: 14px;
    color: #666;
    word-break: break-all;
}

.qr-controls {
    flex: 1;
}

.color-controls {
    margin-bottom: 20px;
}

.color-controls label {
    display: block;
    margin-bottom: 5px;
    font-weight: bold;
    color: #333;
}

.color-controls input[type="color"] {
    width: 60px;
    height: 40px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    margin-bottom: 15px;
}

.qr-actions {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
}

.btn-generate, .btn-download {
    padding: 12px 20px;
    border: none;
    border-radius: 5px;
    font-weight: bold;
    cursor: pointer;
    transition: background 0.3s;
}

.btn-generate {
    background: #ff69b4;
    color: white;
}

.btn-generate:hover {
    background: #ff1493;
}

.btn-download {
    background: #28a745;
    color: white;
}

.btn-download:hover {
    background: #218838;
}

.status-message {
    margin-top: 15px;
    padding: 10px;
    border-radius: 5px;
    text-align: center;
}

.status-success {
    background: #d4edda;
    color: #155724;
    border: 1px solid #c3e6cb;
}

.status-error {
    background: #f8d7da;
    color: #721c24;
    border: 1px solid #f5c6cb;
}

/* Mobile responsive */
@media (max-width: 768px) {
    .qr-container {
        flex-direction: column;
        align-items: center;
    }
    
    .qr-actions {
        justify-content: center;
    }
}
</style>

<script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>
<script>
// QR Code functionality for dashboard
let currentQRCanvas = null;

// Initialize QR code when page loads
document.addEventListener('DOMContentLoaded', function() {
    // Get username from dashboard (you'll need to replace this with actual username variable)
    const username = getUsernameFromDashboard(); // Replace with your actual method
    const profileURL = `https://hotgirl-social-production.up.railway.app/${username}`;
    
    // Display the profile URL
    document.getElementById('profileURL').textContent = profileURL;
    
    // Generate initial QR code
    generateProfileQR();
});

// Function to get username
function getUsernameFromDashboard() {
     return document.getElementById('account-username').textContent;
}



function generateProfileQR() {
    const username = getUsernameFromDashboard();
    const profileURL = `https://hotgirl-social-production.up.railway.app/${username}`;
    const foregroundColor = document.getElementById('qrForeground').value;
    const backgroundColor = document.getElementById('qrBackground').value;
    const qrDisplay = document.getElementById('qrDisplay');
    const downloadBtn = document.getElementById('downloadQRBtn');
    
    // Clear previous QR code
    qrDisplay.innerHTML = '';
    
    try {
        // Create canvas element
        const canvas = document.createElement('canvas');
        
        // Generate QR code
        const qr = new QRious({
            element: canvas,
            value: profileURL,
            size: 256,
            background: backgroundColor,
            foreground: foregroundColor
        });
        
        // Display the QR code
        qrDisplay.appendChild(canvas);
        
        // Store canvas for download
        currentQRCanvas = canvas;
        
        // Show download button
        downloadBtn.style.display = 'inline-block';
        
        // Show success message
        showStatus('success', 'QR code generated successfully!');
        
    } catch (error) {
        showStatus('error', 'Error generating QR code: ' + error.message);
        downloadBtn.style.display = 'none';
    }
}

function downloadQR() {
    if (currentQRCanvas) {
        const username = getUsernameFromDashboard();
        const link = document.createElement('a');
        link.download = `${username}-profile-qr.png`;
        link.href = currentQRCanvas.toDataURL();
        link.click();
        
        showStatus('success', 'QR code downloaded!');
    }
}

function showStatus(type, message) {
    const statusDiv = document.getElementById('qrStatus');
    statusDiv.className = `status-message status-${type}`;
    statusDiv.textContent = message;
    
    // Clear status after 3 seconds
    setTimeout(() => {
        statusDiv.textContent = '';
        statusDiv.className = 'status-message';
    }, 3000);
}

// Update QR code when colors change
document.getElementById('qrForeground').addEventListener('change', generateProfileQR);
document.getElementById('qrBackground').addEventListener('change', generateProfileQR);
</script>