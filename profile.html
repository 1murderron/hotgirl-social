<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="page-title">Profile - HotGirl.social</title>
    
    <link rel="stylesheet" href="/profile.css">

    <!-- <style>

        /* ===== NEW PROFILE PAGE REDESIGN - MOBILE FIRST ===== */

/* Override existing profile styles with new centered tile design */
body.profile .profile-container {
    max-width: 420px;
    margin: 0 auto;
    padding: 2rem 1rem;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
    justify-content: center;
    align-items: center;
}

/* Main profile tile */
.profile-tile {
    background: rgba(0, 0, 0, 0.15);
    backdrop-filter: blur(20px);
    border-radius: 24px;
    padding: 2.5rem 2rem;
    width: 100%;
    max-width: 380px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
    border: 1px solid rgba(255, 255, 255, 0.1);
    text-align: center;
    position: relative;
}

/* Profile photo - slightly overlapping top of tile */
body.profile .profile-photo {
    width: 100px;
    height: 100px;
    border-radius: 50%;
    margin: -50px auto 1.5rem;
    background: rgba(255, 255, 255, 0.2);
    backdrop-filter: blur(10px);
    border: 4px solid rgba(255, 255, 255, 0.3);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2.5rem;
    position: relative;
    z-index: 2;
}

/* Profile name */
body.profile .profile-name {
    font-size: 1.8rem;
    font-weight: 700;
    margin-bottom: 0.5rem;
    color: var(--text-color);
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

/* Profile bio */
body.profile .profile-bio {
    font-size: 1rem;
    opacity: 0.9;
    margin-bottom: 2rem;
    line-height: 1.4;
    color: var(--text-color);
}

/* Links container */
body.profile .profile-links {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    width: 100%;
    margin-bottom: 1.5rem;
}

/* Link buttons - modern button style */
body.profile .profile-link {
    display: flex;
    align-items: center;
    padding: 1rem 1.5rem;
    background: rgba(255, 255, 255, 0.2);
    backdrop-filter: blur(15px);
    border-radius: 16px;
    text-decoration: none;
    color: var(--text-color);
    transition: all 0.3s ease;
    border: 1px solid rgba(255, 255, 255, 0.1);
    position: relative;
    overflow: hidden;
    min-height: 60px;
    font-weight: 500;
    font-size: 1.1rem;
}

body.profile .profile-link:hover {
    background: rgba(255, 255, 255, 0.3);
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
}

body.profile .profile-link:active {
    transform: translateY(0) scale(0.98);
}

/* Link icon */
body.profile .link-icon {
    font-size: 1.5rem;
    margin-right: 1rem;
    width: 24px;
    text-align: center;
    flex-shrink: 0;
}

/* Link title */
body.profile .link-title {
    flex-grow: 1;
    font-weight: 500;
    font-size: 1.1rem;
    text-align: left;
}

/* Link arrow */
body.profile .link-arrow {
    font-size: 1.2rem;
    opacity: 0.7;
    transition: transform 0.3s ease;
    flex-shrink: 0;
    margin-left: 1rem;
}

body.profile .profile-link:hover .link-arrow {
    transform: translateX(4px);
}

/* No links state */
body.profile .no-links {
    text-align: center;
    padding: 2rem 1rem;
    opacity: 0.7;
    font-style: italic;
    color: var(--text-color);
}

/* Footer - smaller and less prominent */
body.profile .profile-footer {
    margin-top: auto;
    padding-top: 2rem;
    text-align: center;
}

body.profile .powered-by {
    font-size: 0.8rem;
    opacity: 0.6;
    color: var(--text-color);
}

body.profile .brand-link {
    color: var(--text-color);
    text-decoration: none;
    font-weight: 500;
    margin-left: 0.25rem;
}

/* Mobile optimizations */
@media (max-width: 480px) {
    .profile-tile {
        padding: 2rem 1.5rem;
        margin: 1rem;
        border-radius: 20px;
    }
    
    body.profile .profile-photo {
        width: 90px;
        height: 90px;
        margin: -45px auto 1.5rem;
        font-size: 2rem;
    }
    
    body.profile .profile-name {
        font-size: 1.6rem;
    }
    
    body.profile .profile-link {
        padding: 1rem;
        min-height: 56px;
        font-size: 1rem;
    }
    
    body.profile .link-icon {
        font-size: 1.3rem;
        margin-right: 0.8rem;
    }
}

/* Tablet and desktop adjustments */
@media (min-width: 768px) {
    body.profile .profile-container {
        max-width: 500px;
    }
    
    .profile-tile {
        max-width: 450px;
        padding: 3rem 2.5rem;
    }
    
    body.profile .profile-photo {
        width: 120px;
        height: 120px;
        margin: -60px auto 2rem;
        font-size: 3rem;
    }
    
    body.profile .profile-name {
        font-size: 2rem;
    }
}

    </style> -->

</head>
<body class="profile">
    <!-- Loading State -->
    <div id="loading-screen" class="loading-screen">
        <div class="spinner"></div>
        <p>Loading profile...</p>
    </div>

    <!-- Error State -->
    <div id="error-screen" class="error-screen" style="display: none;">
        <div class="error-content">
            <h1>Profile Not Found</h1>
            <p>This profile can't be found or has been deactivated.</p>
            <a href="/" class="btn btn-primary">Go to hotgirl.social</a>
        </div>
    </div>

    <!-- Profile Content -->
<div id="profile-content" class="profile-container" style="display: none;">
    <div class="profile-tile">
        <!-- Header -->
        <header class="profile-header">
            <div class="profile-photo" id="profile-photo">
                <span class="photo-placeholder">ðŸ‘¤</span>
            </div>
            <h1 class="profile-name" id="profile-name">Loading...</h1>
            <p class="profile-bio" id="profile-bio"></p>
        </header>

        <!-- Links Section -->
        <main class="profile-links" id="profile-links">
            <!-- Links will be inserted here -->
        </main>
    </div>

    <!-- Footer -->
    <footer class="profile-footer">
        <div class="powered-by">
            <span>Powered by</span>
            <a href="/" class="brand-link">hotgirl.social</a>
        </div>
    </footer>
</div>

    <script>
        // API Configuration
        // Claude, can this be a dynamic URL for easier website cloning?
        const API_BASE_URL = 'https://hotgirl-social-production.up.railway.app'; 
        
        // Get username from URL path
        const pathParts = window.location.pathname.split('/');
        const username = pathParts[pathParts.length - 1];

        // Theme configurations
        const themes = {
            default: {
                background: 'rgb(255 0 42 / 40%)',
                textColor: '#ffffff',
                linkBackground: 'rgba(255, 255, 255, 0.2)',
                linkHover: 'rgba(255, 255, 255, 0.3)'
            },
            dark: {
                background: 'linear-gradient(135deg, #1f2937 0%, #111827 100%)',
                textColor: '#ffffff',
                linkBackground: 'rgba(255, 255, 255, 0.1)',
                linkHover: 'rgba(255, 255, 255, 0.2)'
            },
            pink: {
                background: 'linear-gradient(135deg, #ec4899 0%, #be185d 100%)',
                textColor: '#ffffff',
                linkBackground: 'rgba(255, 255, 255, 0.2)',
                linkHover: 'rgba(255, 255, 255, 0.3)'
            },
            purple: {
                background: 'linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)',
                textColor: '#ffffff',
                linkBackground: 'rgba(255, 255, 255, 0.2)',
                linkHover: 'rgba(255, 255, 255, 0.3)'
            },

            blue: {
                background: 'linear-gradient(170deg, rgb(0 106 255) 0%, rgb(2 32 96) 100%)',
                textColor: '#ffffff',
                linkBackground: 'rgba(255, 255, 255, 0.2)',
                linkHover: 'rgba(255, 255, 255, 0.3)'
            },

            red: {
                background: 'linear-gradient(170deg, rgb(255 0 0) 0%, rgb(96 2 2) 100%)',
                textColor: '#ffffff',
                linkBackground: 'rgba(255, 255, 255, 0.2)',
                linkHover: 'rgba(255, 255, 255, 0.3)'
            },

            green: {
                background: 'linear-gradient(170deg, rgb(0 200 83) 0%, rgb(0 77 36) 100%)',
                textColor: '#ffffff',
                linkBackground: 'rgba(255, 255, 255, 0.2)',
                linkHover: 'rgba(255, 255, 255, 0.3)'
            },

            grey: {
                background: 'linear-gradient(170deg, rgb(220 220 220) 0%, rgb(100 100 100) 100%)',
                textColor: '#ffffff',
                linkBackground: 'rgba(255, 255, 255, 0.2)',
                linkHover: 'rgba(255, 255, 255, 0.3)'
            },

            orange: {
                background: 'linear-gradient(170deg, rgb(255 165 0) 0%, rgb(153 76 0) 100%)',
                textColor: '#ffffff',
                linkBackground: 'rgba(255, 255, 255, 0.2)',
                linkHover: 'rgba(255, 255, 255, 0.3)'
            },

            yellow: {
                background: 'linear-gradient(170deg, rgb(255 235 59) 0%, rgb(204 153 0) 100%)',
                textColor: '#ffffff',
                linkBackground: 'rgba(255, 255, 255, 0.2)',
                linkHover: 'rgba(255, 255, 255, 0.3)'
            },

            teal: {
                background: 'linear-gradient(170deg, rgb(0 150 136) 0%, rgb(0 77 64) 100%)',
                textColor: '#ffffff',
                linkBackground: 'rgba(255, 255, 255, 0.2)',
                linkHover: 'rgba(255, 255, 255, 0.3)'
            },

            brown: {
                background: 'linear-gradient(170deg, rgb(139 69 19) 0%, rgb(70 35 10) 100%)',
                textColor: '#ffffff',
                linkBackground: 'rgba(255, 255, 255, 0.2)',
                linkHover: 'rgba(255, 255, 255, 0.3)'
            },

            gold: {
                background: 'linear-gradient(170deg, rgb(255 215 0) 0%, rgb(184 134 11) 100%)',
                textColor: '#ffffff',
                linkBackground: 'rgba(255, 255, 255, 0.2)',
                linkHover: 'rgba(255, 255, 255, 0.3)'
            },

            silver: {
                background: 'linear-gradient(170deg, rgb(224 224 224) 0%, rgb(136 136 136) 100%)',
                textColor: '#ffffff',
                linkBackground: 'rgba(255, 255, 255, 0.2)',
                linkHover: 'rgba(255, 255, 255, 0.3)'
            }


        };

        // Load profile data
        async function loadProfile() {
            try {
                const response = await fetch(`${API_BASE_URL}/api/u/${username}`);
                
                if (!response.ok) {
                    throw new Error('Profile not found');
                }
                
                const profile = await response.json();
                displayProfile(profile);
                
                // Track page view
                trackPageView(profile.id);
                
            } catch (error) {
                console.error('Error loading profile:', error);
                showError();
            }
        }

        // Display profile data
        function displayProfile(profile) {
            // Hide loading screen
            document.getElementById('loading-screen').style.display = 'none';
            document.getElementById('profile-content').style.display = 'block';

            // Set page title
            document.getElementById('page-title').textContent = `${profile.display_name || profile.username} - hotgirl.social`;

            // Apply theme
            //applyTheme(profile.theme || 'default');
            applyTheme(profile.theme || 'default', profile.custom_colors);


            // Set profile photo
            const photoElement = document.getElementById('profile-photo');
            if (profile.profile_image_url && !profile.profile_image_url.includes('/uploads/')) {
                photoElement.innerHTML = `<img src="${profile.profile_image_url}" alt="Profile photo" class="profile-img">`;
            } else {
                photoElement.innerHTML = '<span class="photo-placeholder">ðŸ‘¤</span>';
            }

            // Set profile name and bio
            document.getElementById('profile-name').textContent = profile.display_name || profile.username;
            
            const bioElement = document.getElementById('profile-bio');
            if (profile.bio) {
                bioElement.textContent = profile.bio;
                bioElement.style.display = 'block';
            } else {
                bioElement.style.display = 'none';
            }

            // Display links
            displayLinks(profile.links);
        }

        // Display links
        function displayLinks(links) {
            const linksContainer = document.getElementById('profile-links');
            
            if (!links || links.length === 0) {
                linksContainer.innerHTML = '<div class="no-links">No links added yet</div>';
                return;
            }

            linksContainer.innerHTML = links.map(link => `
                <a href="#" class="profile-link" data-url="${link.url}" data-id="${link.id}" onclick="handleLinkClick(event, '${link.url}', ${link.id})">
                    <span class="link-icon">${link.icon || 'ðŸ”—'}</span>
                    <span class="link-title">${link.title}</span>
                    <span class="link-arrow">â†’</span>
                </a>
            `).join('');
        }

        

            // Apply theme styling
function applyTheme(themeName, customColors = null) {
    let theme;
    
    if (themeName === 'custom' && customColors) {
        // Use custom colors
        theme = {
            background: customColors.background,
            textColor: customColors.textColor,
            linkBackground: 'rgba(255, 255, 255, 0.2)',
            linkHover: 'rgba(255, 255, 255, 0.3)'
        };
    } else {
        // Use predefined theme
        theme = themes[themeName] || themes.default;
    }
    
    document.body.style.background = theme.background;
    document.body.style.color = theme.textColor;
    
    // Update CSS custom properties for dynamic styling
    document.documentElement.style.setProperty('--link-bg', theme.linkBackground);
    document.documentElement.style.setProperty('--link-hover', theme.linkHover);
    document.documentElement.style.setProperty('--text-color', theme.textColor);
}





        // Handle link clicks
        async function handleLinkClick(event, url, linkId) {
            event.preventDefault();
            
            // Track the click
            try {
                await fetch(`${API_BASE_URL}/links/${linkId}/click`, {
                    method: 'POST'
                });
            } catch (error) {
                console.error('Error tracking click:', error);
            }
            
            // Open link
            window.open(url, '_blank');
        }

        // Track page view
        async function trackPageView(profileId) {
            try {
                // This endpoint might not exist yet, but we'll add it later
                await fetch(`${API_BASE_URL}/analytics/page-view`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ profileId })
                });
            } catch (error) {
                // Silently fail - analytics not critical
            }
        }

        // Show error state
        function showError() {
            document.getElementById('loading-screen').style.display = 'none';
            document.getElementById('error-screen').style.display = 'flex';
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            if (!username) {
                showError();
                return;
            }
            
            loadProfile();
        });

        // Add some visual feedback for link interactions
        document.addEventListener('mousedown', function(e) {
            if (e.target.closest('.profile-link')) {
                e.target.closest('.profile-link').style.transform = 'scale(0.98)';
            }
        });

        document.addEventListener('mouseup', function(e) {
            if (e.target.closest('.profile-link')) {
                e.target.closest('.profile-link').style.transform = 'scale(1)';
            }
        });
    </script>
</body>
</html>